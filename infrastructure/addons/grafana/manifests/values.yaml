# Grafana Helm chart values for Docker Desktop K8s
# Chart: grafana/grafana

# Admin credentials
adminUser: admin
adminPassword: admin  # Change on first login!

# Persistence
persistence:
  enabled: true
  size: 5Gi

# Resources
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 200m
    memory: 512Mi

# Data sources - Prometheus
datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
    - name: Prometheus
      type: prometheus
      url: http://prometheus-server.monitoring.svc.cluster.local
      access: proxy
      isDefault: true
      editable: true

# Dashboard providers
dashboardProviders:
  dashboardproviders.yaml:
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      editable: true
      options:
        path: /var/lib/grafana/dashboards/default

# Pre-configured dashboards
dashboards:
  default:
    # Kubernetes cluster monitoring
    kubernetes-cluster:
      gnetId: 7249
      revision: 1
      datasource: Prometheus

    # Node exporter full
    node-exporter:
      gnetId: 1860
      revision: 27
      datasource: Prometheus

    # Kubernetes pod resources
    pod-resources:
      gnetId: 6417
      revision: 1
      datasource: Prometheus

# Service configuration
service:
  type: NodePort
  port: 80
  nodePort: 30300

# Security context
securityContext:
  runAsUser: 472
  runAsGroup: 472
  fsGroup: 472

# Grafana configuration
grafana.ini:
  server:
    root_url: http://localhost:3000
  analytics:
    check_for_updates: true
  log:
    mode: console
  grafana_net:
    url: https://grafana.net
